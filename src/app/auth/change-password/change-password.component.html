<div class="main-wrapper authentication-wrapper">
    <div class="container-fuild">
        <div class="w-100 overflow-hidden position-relative flex-wrap d-block vh-100">
            <div class="row justify-content-center align-items-center vh-100 overflow-auto flex-wrap ">
                <div class="col-xxl-4 col-xl-4 col-lg-6 col-md-6 col-11 mx-auto">
                    <div class="p-4 text-center">
                        <img src="assets/img/logo-white.svg" alt="logo" class="img-fluid">
                    </div>
                    <div class="card authentication-card">
                        <div class="card-header">
                            <div class="text-center">
                                <h5 class="mb-1">Cambiar Contraseña</h5>
                                <p></p>
                            </div>
                        </div>
                        <div class="card-body">
                            <form [formGroup]="changePasswordForm" (ngSubmit)="submitForm()">
                                <div class="mb-3">
                                    <label class="form-label">Contraseña</label>
                                    <div class="pass-group input-icon">
                                        <span class="input-icon-addon">
                                            <i class="isax isax-lock"></i>
                                          </span>
                                        <input
                                        formControlName="newPassword"
                                        [type]="password[0] ? 'text' : 'password'"
                                        class="pass-input form-control"
                                        placeholder="Ingrese Contraseña"
                                      />
                                      <span
                                        class="isax toggle-password"
                                        [ngClass]="password[0] ? 'isax-eye' : 'isax-eye-slash'"
                                        (click)="togglePassword(0)"
                                        (keydown.enter)="togglePassword(0)"
                                        tabindex="0"
                                      ></span>
                                      </div>
                                      <div *ngIf="changePasswordForm.controls['newPassword'].invalid && (changePasswordForm.controls['newPassword'].dirty || changePasswordForm.controls['newPassword'].touched)"
                                        class="text-danger">

                                        <div *ngIf="changePasswordForm.controls['newPassword'].errors?.['required']">
                                            Contraseña requerida
                                        </div>
                                        <div *ngIf="changePasswordForm.controls['newPassword'].errors?.['minLength']">
                                            La contraseña debe tener un minimo de 8 caracteres
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-4">
                                    <label class="form-label">Confirmar Contraseña</label>
                                    <div class="pass-group input-icon">
                                        <span class="input-icon-addon">
                                            <i class="isax isax-lock"></i>
                                          </span>
                                        <input
                                        formControlName="confirmPassword" 
                                        [type]="password[1] ? 'text' : 'password'"
                                        class="pass-input form-control"
                                        placeholder="Ingrese Contraseña"
                                      />
                                      <span
                                        class="isax toggle-password"
                                        [ngClass]="password[1] ? 'isax-eye' : 'isax-eye-slash'"
                                        (click)="togglePassword(1)"
                                        (keydown.enter)="togglePassword(1)"
                                        tabindex="0"
                                      ></span>
                                      </div>
                                      <div *ngIf="changePasswordForm.controls['confirmPassword'].invalid && (changePasswordForm.controls['confirmPassword'].dirty || changePasswordForm.controls['confirmPassword'].touched)"
                                        class="text-danger">

                                        <div *ngIf="changePasswordForm.controls['confirmPassword'].errors?.['required']">
                                            Confirmar contraseña requerida
                                        </div>
                                        <div *ngIf="changePasswordForm.controls['confirmPassword'].errors?.['minLength']">
                                            La contraseña debe tener un minimo de 8 caracteres
                                        </div>
                                    </div>
                                </div>
                                <div class="mb-0">
                                    <div class="text-danger mb-1 ms-2">
                                        <div *ngIf="messageAlert">
                                            {{messageAlert}}
                                        </div>
                                    </div>
                        

                                    <button type="submit"
                                        class="btn btn-xl btn-primary d-flex align-items-center justify-content-center w-100"
                                        [disabled]="loading || (changePasswordForm.touched && changePasswordForm.invalid)">
                                        <span>Cambiar Contraseña<i class="isax isax-arrow-right-3 ms-2"></i></span>

                                        <div *ngIf="loading" class="spinner-border spinner-border-sm">
                                        </div>
                                    </button>
                                    
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="coprright-footer">
        <p class="fs-14">Copyright &copy; 2025. All Rights Reserved, <a href="javascript:void(0);" class="text-primary fw-medium">Tourya</a></p>
    </div>
</div>